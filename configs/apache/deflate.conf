<IfModule mod_deflate.c>
	DeflateCompressionLevel 9
	
	<Location />
		#On supprime ensuite les Etags
		Header unset ETag

		# Disable ETag for files
		FileETag None
		AddOutputFilterByType DEFLATE text/plain text/css text/javascript application/x-javascript application/javascript text/xml

		AddOutputFilterByType DEFLATE application/xhtml+xml
		AddOutputFilterByType DEFLATE text/css
		AddOutputFilterByType DEFLATE application/xml
		AddOutputFilterByType DEFLATE image/svg+xml
		AddOutputFilterByType DEFLATE application/rss+xml
		AddOutputFilterByType DEFLATE application/atom_xml
		AddOutputFilterByType DEFLATE application/x-httpd-php
		AddOutputFilterByType DEFLATE application/x-httpd-fastphp
		AddOutputFilterByType DEFLATE application/x-httpd-eruby
		AddOutputFilterByType DEFLATE text/html
		AddOutputFilterByType DEFLATE application/vnd.google-earth.kml+xml
		AddOutputFilterByType DEFLATE application/javascript

		SetOutputFilter DEFLATE
		
		SetEnvIfNoCase Request_URI \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
		SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png|avi|mpg|swf|flv|mov|mp3|ogv|mp4|pdf|webm|ogg|rm|zip)$ no-gzip dont-vary
		
		# gestion des navigateurs buggés
		BrowserMatch ^Mozilla/4 gzip-only-text/html
		BrowserMatch ^Mozilla/4\.0[678] no-gzip
		# Cette ligne est en général mise sur tous les tutoriaux mais empêche
		# flowplayer de se charger sur Internet Explorer
		#BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
		
		# Make sure proxies don't deliver the wrong content
		Header append Vary User-Agent env=!dont-vary
	</Location>

	# Loguer les actions du mod_deflate
	DeflateFilterNote Input input_info
	DeflateFilterNote Output output_info
	DeflateFilterNote Ratio ratio_info
	LogFormat '"%r" %{output_info}n/%{input_info}n (%{ratio_info}n%%)' deflate
	#CustomLog /var/log/apache2/deflate_log deflate
	
</IfModule>